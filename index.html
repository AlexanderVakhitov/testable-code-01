<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Testable code</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<!--<link rel="stylesheet" href="shower/themes/ribbon/styles/screen.css">-->
    <link rel="stylesheet" href="styles/screen.css">
    <link rel="stylesheet" href="styles/print.css" media="print">
    <link rel="stylesheet" href="styles/idea.min.css">
    <link rel="stylesheet" href="styles/user.css">
</head>
<body class="list">
	<header class="caption">
		<h1>Тестируемый код</h1>
		<p>Сергей Жигалов</p>
	</header>

    <section class="slide null">
        <img src="images/yandex_lang_ru.svg" class="yandex"/>
    </section>

    <section class="slide first">
        <div class="arrow">
            <img src="images/yandex_lang_ru.svg" class="yandex"/>
            <h2>Тестируемый код</h2>
            <div class="info">
                <p class="author"><span class="first-red">С</span>ергей Жигалов</p>
                <p class="location">Курс разработки интерфейсов, 2014 г.</p>
            </div>
        </div>
    </section>

    <section class="slide">
            <blockquote>Writing software is the hardest thing people do (c) Douglas Crockford</blockquote>
            <img src="images/Douglas_Crockford.jpg" alt="Douglas Crockford" height="300"/>
    </section>

    <section class="slide cover h">
        <img src="images/mocha.png" alt="Mocha"/>
    </section>

    <section class="slide">
        <h2>Mocha</h2>
        <ul>
            <li ><a href="http://visionmedia.github.io/mocha/">http://visionmedia.github.io/mocha/</a></li>
            <li >$ npm install -g mocha</li>
            <li >mocha</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Mocha</h2>
        <ul>
            <li >describe()</li>
            <li >it()</li>
            <li >before()</li>
            <li >after()</li>
            <li >beforeEach()</li>
            <li >afterEach()</li>
        </ul>
    </section>
    
    

    <section class="slide cover w" style="background: #ffffff;">
        <img src="images/chai.png" alt="Chai" style="padding-top: 200px;"/>
    </section>

    <section class="slide">
        <h2>Chai</h2>
        <ul>
            <li ><a href="http://chaijs.com/">http://chaijs.com/</a></li>
            <li >$ npm install chai</li>
            <li >var chai = require('chai')</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Chai interfaces</h2>
        <ul>
            <li >Should</li>
            <li >Expect</li>
            <li >Assert</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Chai. Expect</h2>
        <ul>
            <li >.to.equal('chai')</li>
            <li >.to.deep.equal({}}</li>
            <li >.to.be.true</li>
            <li >.to.not.be.undefined</li>
            <li >.to.have.length(3)</li>
            <li >...</li>
        </ul>
    </section>

    

    <section class="slide cover w" style="background: #ffffff;">
        <img src="images/webstorm_logo.gif" alt="WS" style="padding-top: 200px;"/>
    </section>

    <section class="slide">
        <h2>WebStorm</h2>
        <ul>
            <li ><a href="http://blog.jetbrains.com/webstorm/2013/11/webstorm-7-0-2-is-available/">Run</a></li>
            <li >Unresolved</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Mocha и асинхронность</h2>
        <ul>
            <li >done() / done('Error')</li>
            <li >Promise</li>
            <li >Promise & assert fail case</li>
        </ul>
    </section>

    

    <section class="slide">
        <h2>Mocha. Запуск</h2>
        <ul>
            <li >it.only(name, cb) / describe.only(name, cb)</li>
            <li >it.skip(name, cb) / describe.skip(name, cb)</li>
        </ul>
    </section>

    <section class="slide cover h" >
        <img src="images/mockery.jpg" alt="" style="background: #ffffff; padding: 0 25%"/>
    </section>

    <section class="slide">
        <h2>Mockery</h2>
        <ul>
            <li ><a href="https://github.com/mfncooper/mockery">https://github.com/mfncooper/mockery</a></li>
            <li >$ npm install mockery</li>
        </ul>
        <pre class="l-7 javascript">
<code>    before(function () {</code>
<code>        mockery.enable();</code>
<code>    });</code>
<code> </code>
<code>    after(function () {</code>
<code>        mockery.disable();</code>
<code>    });</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Mockery</h2>
        <ul>
            <li >mockery.registerMock('fs', fsMock);</li>
            <li >mockery.deregisterMock('fs');</li>
            <li >mockery.registerSubstitute('fs', 'fs-mock');</li>
            <li >mockery.deregisterSubstitute('fs');</li>
            <li >mockery.registerAllowables(['async', 'path', 'util']);</li>
            <li >mockery.deregisterAllowables(['async', 'path', 'util']);</li>
        </ul>
    </section>

    <section class="slide cover" style="background: #ffffff">
        <img src="images/sinon.png" alt="sinonjs" style="padding: 36% 47%"/>
    </section>

    <section class="slide">
        <h2>Sinon.JS</h2>
        <ul>
            <li ><a href="http://sinonjs.org/">http://sinonjs.org/</a></li>
            <li>$ npm install sinon</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Sinon.JS</h2>
        <ul>
            <li >Spies</li>
            <li >Stubs</li>
            <li >Mocks</li>
            <li >Fake timers</li>
            <li >Fake XHR</li>
            <li >Fake server</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Spies</h2>
        <ul>
            <li ><a href="http://sinonjs.org/docs/#spies">http://sinonjs.org/docs/#spies</a></li>
            <li >sinon.spy() / sinon.spy(myFunc)</li>
            <li >spy.callCount</li>
            <li >spy.called</li>
            <li >spy.getCall(0).args[0]</li>
            <li >spy.threw()</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Stubs</h2>
        <ul>
            <li ><a href="http://sinonjs.org/docs/#stubs">http://sinonjs.org/docs/#stubs</a></li>
            <li >sinon.stub()</li>
            <li >stub.withArgs(42).returns(1);</li>
            <li >stub.withArgs(1).throws("TypeError");</li>
            <li >stub.onCall(n)</li>
            <li >stub.callArgWith(argNum, [arg1, arg2, ...])</li>
        </ul>
    </section>

    <section class="slide cover w">
        <h2>Цикломатическое число</h2>
        <img src="images/tsic.gif" alt=""/>
    </section>

    <section class="slide">
        <h2>Цикломатическое число</h2>
        <pre class="javascript">
<code>function abs(number) {</code>
<code>    return number >= 0 ? number : -number;</code>
<code>}</code>
        </pre>

        <img src="images/cyclomatic_complexity.png" alt=""/>
    </section>

    <section class="slide cover w">
        <h2>Code coverage</h2>
        <img src="images/katok_asfalt.jpeg" alt=""/>
    </section>

    <section class="slide">
        <h2>Code coverage</h2>
        <ul>
            <li><a href="https://www.npmjs.org/package/istanbul">https://www.npmjs.org/package/istanbul</a></li>
            <li>npm install -g istanbul</li>
            <li>istanbul cover node_modules/.bin/_mocha test/**/*.test.js --report html</li>
        </ul>
    </section>

    <section class="slide cover w">
        <h2>Документация</h2>
        <img src="images/docs.jpg" alt=""/>
    </section>

    <section class="slide">
        <h2>yuidoc</h2>
        <ul>
            <li>npm -g install yuidocjs</li>
            <li>yuidoc .</li>
        </ul>
    </section>

    <section class="slide">
        <h2>jsdoc</h2>
        <ul>
            <li>npm install jsdoc@"<=3.3.0"</li>
            <li>jsdoc ./balance.js</li>
        </ul>
    </section>

    <section class="slide">
        <h2>DOCCO</h2>
        <ul>
            <li>sudo npm install -g docco</li>
            <li>docco ./balance.js</li>
        </ul>
    </section>


    <section class="slide cover w">
        <h2>SuperTest</h2>
        <img src="images/lem.jpg" alt=""/>
    </section>


    <section class="slide">
        <h2>SuperTest</h2>
        <ul>
            <li><a href="https://github.com/visionmedia/supertest">https://github.com/visionmedia/supertest</a></li>
            <li>var request = require('supertest')</li>
            <li>var app = express();</li>
            <li>request(app)</li>
            <li>.expect(status, body[, fn])</li>
            <li>.expect(field, value[, fn])</li>
            <li>.expect(function(res) {})</li>
            <li>.end(fn)</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Почитать</h2>
        <img src="images/testable_javascript.jpg" alt="Testable JavaScript" height="400px" style="display: block"/>
        <a href="http://books.google.ru/books?id=hjE767CCeQwC&lpg=PA7&ots=T6WN3arXxT&dq=testability%20maintainability%20understandability&hl=ru&pg=PP1#v=onepage&q&f=true">Читать</a>
    </section>

	<div class="progress"><div></div></div>
    <script src="js/jquery.min.js"></script>
    <script src="js/highlight.min.js"></script>
    <script src="js/shower/shower.min.js"></script>
    <script src="js/index.js"></script>
</body>
</html>